<!DOCTYPE html>
<!-- saved from url=(0049)https://getbootstrap.com/docs/4.3/examples/album/ -->
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <title>eMercado - Todo lo que busques está aquí</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/album/">
    <link href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">

    <style>
        body, html {
            height: 100%;
            background-color: #2C2F33;
            color: white;
        }

        .bg-sss {
            background-color: #23272A !important;
        }

    </style>
</head>

<body class="h-100">


<div class="v-center">
    <div class="row justify-content-center align-middle mx-auto my-5">
        <div class="col col-auto mx-auto my-auto">
            <div id="alert" class="p-2 mb-4 text-center d-none">
                Cuidado
            </div>


            <div class="p-5 shadow-lg bg-sss">

                <div class="input-group">
                    <label class="input-group-text rounded-0">Nombre</label>
                    <input id="userInput" class="form-control ">
                </div>

                <div class="input-group mt-3">
                    <label class="input-group-text rounded-0">Contraseña</label>
                    <input id="passInput" type="password" class="form-control">
                </div>

                <button id="send" class="btn btn-outline-success w-100 mt-4">Enviar</button>

                <div class="mx-auto mt-2 text-center">
                    <fb:login-button
                            scope="public_profile,email"
                            onlogin="checkLoginState();">
                    </fb:login-button>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    function statusChangeCallback(resp) {
        console.log("Hello - ", resp)
        if (resp.status !== "connected") return;

        let user_id = resp.authResponse.userID;

        FB.api(
            `/${user_id}/`,
            function (response) {
                if (response && !response.error) {
                    console.log(response);
                    let alert = document.getElementById('alert');

                    alert.classList.add("bg-success")
                    alert.classList.remove("d-none")
                    alert.innerText = `Bienvenido ${response.name}! Redirigiendo..`;

                    localStorage.setItem("logged", response);
                    setTimeout(() => {
                        window.location.href = "index.html";
                    }, 1000 * 3)
                }
            }
        );
    }

    function checkLoginState() {
        FB.getLoginStatus(function (response) {
            statusChangeCallback(response);
        });
    }

    window.fbAsyncInit = function () {
        FB.init({
            appId: '322697965545436',
            cookie: true,
            xfbml: true,
            version: 'v8.0'
        });

        FB.AppEvents.logPageView();

    };

    (function (d, s, id) {
        let js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

<script src="js/init.js"></script>
<script src="js/login.js"></script>
</body>
</html>
